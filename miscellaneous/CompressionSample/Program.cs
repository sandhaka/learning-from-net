// Online C# Editor for free
// Write, Edit and Run your C# code using C# Online Compiler

using System;
using System.IO.Compression;
using System.Text;

public class HelloWorld
{
    public static string CompressString(string text)
    {
        byte[] buffer = Encoding.UTF8.GetBytes(text);
        var memoryStream = new MemoryStream();
        using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Compress, true))
        {
            gZipStream.Write(buffer, 0, buffer.Length);
        }
    
        memoryStream.Position = 0;
    
        var compressedData = new byte[memoryStream.Length];
        memoryStream.Read(compressedData, 0, compressedData.Length);
    
        var gZipBuffer = new byte[compressedData.Length + 4];
        Buffer.BlockCopy(compressedData, 0, gZipBuffer, 4, compressedData.Length);
        Buffer.BlockCopy(BitConverter.GetBytes(buffer.Length), 0, gZipBuffer, 0, 4);
        return Convert.ToBase64String(gZipBuffer);
    }

    public static void Main()
    {
        var stringToCompress = "<!DOCTYPE html>\n<html\n  xmlns=\"http://www.w3.org/1999/xhtml\"\n  xmlns:v=\"urn:schemas-microsoft-com:vml\"\n  xmlns:o=\"urn:schemas-microsoft-com:office:office\"\n>\n  <head>\n    <title>Richiesta Approvazione Preventivo - Livello 2</title>\n\n    <!--[if !mso]><!-->\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <!--<![endif]-->\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n\n    <style type=\"text/css\">\n      #outlook a {\n        padding: 0;\n      }\n      body {\n        font-family: sans-serif;\n        margin: 0;\n        padding: 0;\n        -webkit-text-size-adjust: 100%;\n        -ms-text-size-adjust: 100%;\n      }\n      table,\n      td {\n        border-collapse: collapse;\n        mso-table-lspace: 0pt;\n        mso-table-rspace: 0pt;\n      }\n      img {\n        border: 0;\n        height: auto;\n        line-height: 100%;\n        outline: none;\n        text-decoration: none;\n        -ms-interpolation-mode: bicubic;\n      }\n      p {\n        display: block;\n        margin: 13px 0;\n        line-height: 15px;\n      }\n      a:hover,\n      a:visited,\n      a:link {\n        text-decoration: none;\n        color: rgb(72, 163, 69);\n        font-weight: bold;\n      }\n    </style>\n\n    <!--[if mso]>\n      <noscript>\n        <xml>\n          <o:OfficeDocumentSettings>\n            <o:AllowPNG />\n            <o:PixelsPerInch>96</o:PixelsPerInch>\n          </o:OfficeDocumentSettings>\n        </xml>\n      </noscript>\n    <![endif]-->\n    <!--[if lte mso 11]>\n      <style type=\"text/css\">\n        .mj-outlook-group-fix {\n          width: 100% !important;\n        }\n      </style>\n    <![endif]-->\n  </head>\n  <body>\n    <div style=\"background: #efefef\">\n      <!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:600px;\" width=\"600\" ><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]-->\n      <div\n        style=\"\n          background: #ffffff;\n          background-color: #ffffff;\n          margin: 0px auto;\n          max-width: 700px;\n        \"\n      >\n        <table\n          align=\"center\"\n          border=\"0\"\n          cellpadding=\"0\"\n          cellspacing=\"0\"\n          role=\"presentation\"\n          style=\"background: #ffffff; background-color: #ffffff; width: 100%\"\n        >\n          <tbody>\n            <tr>\n              <td\n                style=\"\n                  direction: ltr;\n                  font-size: 0px;\n                  padding: 20px 0 0 0;\n                  text-align: center;\n                \"\n              >\n                <!--[if mso | IE]><table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"\" style=\"vertical-align:top;width:560px;\" ><![endif]-->\n                <div\n                  class=\"mj-column-per-100 mj-outlook-group-fix\"\n                  style=\"\n                    font-size: 0px;\n                    text-align: left;\n                    direction: ltr;\n                    display: inline-block;\n                    vertical-align: top;\n                    width: 100%;\n                  \"\n                >\n                  <table\n                    border=\"0\"\n                    cellpadding=\"0\"\n                    cellspacing=\"0\"\n                    role=\"presentation\"\n                    width=\"100%\"\n                  >\n                    <tbody>\n                      <tr>\n                        <td\n                          style=\"\n                            font-size: 0px;\n                            padding: 0 15px;\n                            word-break: break-word;\n                          \"\n                        >\n                          <div\n                            style=\"\n                              color: #000000;\n                              font-size: 20px;\n                              font-weight: 400;\n                              line-height: 32px;\n                            \"\n                          >\n                            Gentile Cliente,<br />\n                            <br />con la presente email si segnala che\n                            l'evasione della Richiesta\n                            <a href=\"<%request_url%>\"> #<%request_number%> </a>\n                            necessita di un intervento extra canone e,<br />\n                            sulla base delle procedure condivise, di una seconda\n                            e definitiva approvazione formale del relativo\n                            Preventivo allegato.<br />\n                            <br />\n                            Si ricorda che per effettuare l'approvazione del\n                            Preventivo è necessario accedere al Portale Clienti\n                            con la propria utenza, aprire la sezione\n                            &lt;&lt;Interventi&gt;&gt; all'interno del menù\n                            delle notifiche(<img\n                              style=\"width: 15px; height: 15px\"\n                              src=\"http://cdn.mcauto-images-production.sendgrid.net/efba94b352ab9a16/f03b3775-9b42-4672-8321-b473f15216f5/24x24.png\"\n                            />),<br />\n                            selezionare il messaggio della Richiesta in oggetto\n                            ed esprimere l'approvazione o il rifiuto\n                            (eventualmente corredati da informazioni aggiuntive)\n                            utilizzando i relativi tasti.<br />\n                            <br />\n                            Nel caso di dubbi o necessità di chiarimenti,\n                            preghiamo di non rispondere direttamente a questa\n                            mail, ma contattare il supporto Renovit tramite\n                            canali abilitati.<br />\n                            <br />\n                            Grazie,<br />\n                          </div>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n                <!--[if mso | IE]></td></tr></table><![endif]-->\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <!--[if mso | IE]></td></tr></table><![endif]-->\n      <!--[if mso | IE]><table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"\" style=\"width:600px;\" width=\"600\" bgcolor=\"#3a322b\"><tr><td style=\"line-height:0px;font-size:0px;mso-line-height-rule:exactly;\"><![endif]-->\n      <div\n        style=\"\n          background: #ffffff;\n          background-color: #ffffff;\n          margin: 0px auto;\n          max-width: 700px;\n        \"\n      >\n        <table\n          align=\"center\"\n          border=\"0\"\n          cellpadding=\"0\"\n          cellspacing=\"0\"\n          role=\"presentation\"\n          style=\"width: 100%\"\n        >\n          <tbody>\n            <tr>\n              <td\n                style=\"\n                  direction: ltr;\n                  font-size: 0px;\n                  text-align: center;\n                  padding: 10px 0;\n                \"\n              >\n                <!--[if mso | IE]>\n                        <table role=\"presentation\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\"><tr><td class=\"\" style=\"vertical-align:top;width:300px;\"><![endif]-->\n                <div\n                  class=\"mj-column-per-50 mj-outlook-group-fix\"\n                  style=\"\n                    font-size: 0px;\n                    text-align: left;\n                    direction: ltr;\n                    display: inline-block;\n                    vertical-align: top;\n                    width: 100%;\n                  \"\n                >\n                  <table\n                    border=\"0\"\n                    cellpadding=\"0\"\n                    cellspacing=\"0\"\n                    role=\"presentation\"\n                    style=\"vertical-align: top\"\n                    width=\"100%\"\n                  >\n                    <tbody>\n                      <tr>\n                        <td\n                          style=\"\n                            font-size: 0px;\n                            word-break: break-word;\n                            padding: 0px 15px;\n                          \"\n                        >\n                          <table\n                            border=\"0\"\n                            cellpadding=\"0\"\n                            cellspacing=\"0\"\n                            role=\"presentation\"\n                            style=\"\n                              border-collapse: collapse;\n                              border-spacing: 0px;\n                            \"\n                          >\n                            <tbody>\n                              <tr>\n                                <td>\n                                  <a href=\" \" target=\"_blank\">\n                                    <img\n                                      alt=\" \"\n                                      height=\"auto\"\n                                      src=\"http://cdn.mcauto-images-production.sendgrid.net/efba94b352ab9a16/65945369-995d-438a-bb6d-470a26862e75/1279x369.png\"\n                                      style=\"\n                                        border: 0;\n                                        display: block;\n                                        outline: none;\n                                        text-decoration: none;\n                                        height: auto;\n                                        width: 175px;\n                                        font-size: 13px;\n                                      \"\n                                      width=\"100%\"\n                                    />\n                                  </a>\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td\n                          style=\"\n                            font-size: 0px;\n                            word-break: break-word;\n                            padding: 0px 15px;\n                          \"\n                        >\n                          <div\n                            style=\"\n                              font-family: Ubuntu, Helvetica, Arial, sans-serif;\n                              font-size: 13px;\n                              line-height: 1;\n                              color: rgb(72, 163, 69);\n                            \"\n                          >\n                            <br />\n                            <p style=\"font-size: 17px; font-weight: bold\">\n                              Renovit\n                            </p>\n                            <p style=\"font-size: 15px\">\n                              Via G. Malipiero, 16-18<br />\n                              20138 Milano (MI)<br />\n                              <a href=\"www.renovit.it\">www.renovit.it</a\n                              ><br /><br />\n                              Una società Snam e CPD Equity<br /><br />\n                              <strong>\n                                Questa mail è stata generata automaticamente.<br />\n                                La casella non è monitorata, si prega di non\n                                rispondere.\n                              </strong>\n                            </p>\n                            <p style=\"font-size: 12px\">\n                              Ai sensi del Reg. Europeo 679/2016 si precisa che\n                              le informazioni contenute in questo messaggio sono\n                              riservate ed a uso esclusivo del destinatario.<br />\n                              Qualora questo messaggio Le fosse pervenuto per\n                              errore, La invitiamo ad eliminarlo senza copiarlo\n                              e a non inoltrarlo a terzi, dandocene gentilmente\n                              comunicazione.\n                            </p>\n                          </div>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <!--[if mso | IE]></td></tr></table><![endif]-->\n    </div>\n  </body>\n</html>\n";
        Console.WriteLine(stringToCompress);
        Console.WriteLine(CompressString(stringToCompress));
    }
}